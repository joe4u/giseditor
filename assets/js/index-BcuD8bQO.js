const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/index-Q_9iz5VQ.js","assets/js/vendor-CeW-n8KA.js","assets/js/lodash-CpWKv_2Z.js"])))=>i.map(i=>d[i]);
var e=Object.defineProperty,t=(t,n,i)=>((t,n,i)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[n]=i)(t,"symbol"!=typeof n?n+"":n,i);import{aT as n,aU as i,aV as a,aW as o,ab as r,aX as l,aY as s,aZ as c,a_ as d,a$ as u,b0 as p,b1 as g,b2 as m,b3 as v,b4 as f,z as y,r as h,c as w,a0 as C,k as E,D as b,o as P,q as S,b5 as I,b6 as k,i as D,m as M,a as x,u as T,P as _,Z as V,M as L,ak as R,R as A,al as O,S as N,s as U,W as G,X as $,b7 as B,b8 as F,b9 as H,ba as z,bb as K,L as Y,bc as j,p as W,O as q,bd as Z,be as J,bf as X,bg as Q,bh as ee}from"./vendor-CeW-n8KA.js";import{E as te,a as ne,b as ie,c as ae,d as oe,e as re,f as le,g as se,h as ce,i as de,j as ue,k as pe,l as ge,m as me,n as ve,o as fe,p as ye,q as he,r as we,z as Ce,s as Ee,t as be,u as Pe,v as Se,w as Ie}from"./ui-library-CATU95XK.js";import{C as ke,H as De,a as Me,P as xe,c as Te,J as _e,b as Ve,d as Le,e as Re,f as Ae,g as Oe,E as Ne,h as Ue,i as Ge,j as $e,I as Be,B as Fe,M as He,k as ze,l as Ke,m as Ye,R as je,S as We,n as qe,K as Ze,o as Je,A as Xe,p as Qe,q as et,G as tt,r as nt,s as it,V as at,t as ot,u as rt}from"./cesium-Q2vtL85A.js";import"./lodash-CpWKv_2Z.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const lt=ke.CYAN,st=ke.WHITE.withAlpha(.4),ct=ke.WHITE,dt=ke.WHITE,ut=ke.BLACK,pt=ke.RED;var gt=(e=>(e.POINT="POINT",e.LINE="LINE",e.POLYGON="POLYGON",e.UNDEFINED="UNDEFINED",e))(gt||{}),mt=(e=>(e.STRING="STRING",e.NUMBER="NUMBER",e.BOOLEAN="BOOLEAN",e.DATETIME="DATETIME",e))(mt||{});class vt extends tt{constructor(e="",n="UNDEFINED",i=[]){super(e),t(this,"geoType","UNDEFINED"),t(this,"fields",[]),this.geoType=n,this.fields=i}}class ft extends Ne{constructor(e,n){super(),t(this,"relationPoints"),t(this,"clampToGround");const i=this;this.clampToGround=Et.HeightReference===De.CLAMP_TO_GROUND;const a=new $e({hierarchy:new Ve(()=>{const t=Et.cloneCartesian3(e);return new Je(t)},!1),material:new Le(st),outline:!0,outlineColor:ut,outlineWidth:1,perPositionHeight:new Ge(!1)});this.relationPoints=e,this.properties=n,this.polyline=new Ue({positions:new Ve(()=>{Et.HeightReference===De.CLAMP_TO_GROUND&&this.clampToGround?(i.entityCollection.remove(i),Ut.waitForEntityRemoval(i).then(()=>{a.perPositionHeight.setValue(!1),i.entityCollection.add(i)}),this.clampToGround=!1):Et.HeightReference===De.CLAMP_TO_GROUND||this.clampToGround||(i.entityCollection.remove(i),Ut.waitForEntityRemoval(i).then(()=>{a.perPositionHeight.setValue(!0),i.entityCollection.add(i)}),this.clampToGround=!0);const t=Et.cloneCartesian3(e);return t.push(t[0]),t},!1),clampToGround:new Ve(function(){return Et.HeightReference===De.CLAMP_TO_GROUND},!1),width:.5,material:new Le(ut),arcType:new Ve(()=>Et.HeightReference===De.CLAMP_TO_GROUND?Xe.GEODESIC:Xe.NONE,!1)}),this.polygon=a}}class yt extends Ne{constructor(e,n,i){super(),t(this,"relationPosition");const a=this;this.relationPosition=e,this.position=new Ve(()=>Et.HeightReference===De.NONE?a.relationPosition:Et.viewer.scene.clampToHeight(a.relationPosition),!1),this.billboard=new Ye({image:n,scale:1,color:i||pt,disableDepthTestDistance:1/0})}setPosition(e){this.relationPosition=e}}const ht=class e{constructor(t){e.viewer=t,e.handler||(e.handler=new We(t.canvas)),e.currentInstance&&e.isdrawing&&(e.currentInstance.stop(),e.currentInstance.clear()),e.currentInstance=this,this.start()}start(){const t=this;e.handler.setInputAction(function(e){t.click(t,e)},qe.LEFT_CLICK),e.handler.setInputAction(function(e){t.click_ctrl(t,e)},qe.LEFT_CLICK,Ze.CTRL),e.handler.setInputAction(function(e){t.move(t,e)},qe.MOUSE_MOVE),e.handler.setInputAction(function(e){t.dbclick(t,e)},qe.LEFT_DOUBLE_CLICK),e.handler.setInputAction(function(e){t.mousedown(t,e)},qe.LEFT_DOWN),e.handler.setInputAction(function(e){t.mouseup(t,e)},qe.LEFT_UP),e.handler.setInputAction(function(e){t.rclick(t,e)},qe.RIGHT_CLICK),document.addEventListener("keydown",t.keydown)}stop(){e.handler.removeInputAction(qe.LEFT_CLICK),e.handler.removeInputAction(qe.LEFT_CLICK,Ze.CTRL),e.handler.removeInputAction(qe.MOUSE_MOVE),e.handler.removeInputAction(qe.LEFT_DOUBLE_CLICK),e.handler.removeInputAction(qe.LEFT_DOWN),e.handler.removeInputAction(qe.LEFT_UP),e.handler.removeInputAction(qe.RIGHT_CLICK),document.removeEventListener("keydown",this.keydown)}clear(){}click(e,t){}click_ctrl(e,t){}move(e,t){}dbclick(e,t){}mousedown(e,t){}mouseup(e,t){}rclick(e,t){}keydown(e){}};t(ht,"viewer"),t(ht,"currentInstance"),t(ht,"handler"),t(ht,"isdrawing",!1);let wt=ht;const Ct=class e extends wt{constructor(n,i,a,o){super(n),t(this,"owner"),t(this,"activeShape"),t(this,"floatingPoint"),t(this,"activeShapePoints"),t(this,"properties"),this.floatingPoint=new yt(Me.fromDegrees(0,90),"icons/img/dragIcon.png",ke.WHITE),n.entities.add(this.floatingPoint),e.allDrawings.push(this),this.activeShapePoints=new Array,o&&(this.properties=new xe(o)),a&&a.forEach((e,t,n)=>{this.activeShapePoints.push(Te(e,!0))}),e.currentDrawing=this,this.owner=i}rclick(e,t){wt.isdrawing&&(this.activeShapePoints.length>2||this.activeShapePoints.pop(),this.activeShapePoints.pop())}clear(){const t=wt.viewer;this.owner.remove(this.activeShape),e.viewer.entities.remove(e.vertex1),e.viewer.entities.remove(e.vertex2),e.viewer.entities.remove(e.midvertex),e.viewer.entities.remove(e.verticalVertex),t.entities.remove(this.floatingPoint),this.activeShapePoints=[],e.allDrawings.pop()}static getDrawings(t){return e.allDrawings.find(e=>e.activeShape===t)}updateVertex(e,t){this.activeShapePoints[e]=t}deleteVertex(e){this.activeShapePoints.splice(e,1)}destroy(){const t=wt.viewer;this.activeShapePoints=[],this.owner.remove(this.activeShape),t.entities.remove(this.floatingPoint),e.allDrawings.splice(e.allDrawings.indexOf(this),1)}moveShape(e){this.activeShapePoints.forEach((t,n)=>{t.x+=e.x,t.y+=e.y,t.z+=e.z})}static cloneCartesian3(e){const t=new Array;return e.forEach(e=>{t.push(Te(e,!0))}),t}static parseDrawings(t,n=!1){var i,a;let o;const r=t.entityCollection;if(t.polygon){o=new St(wt.viewer,r),e.allDrawings.push(o);const n=(null==(i=t.polygon.hierarchy)?void 0:i.getValue(_e.now())).positions;o.activeShapePoints.push(...e.cloneCartesian3(n)),o.activeShape=e.drawShape(o.activeShapePoints,"polygon",r,new xe(t.properties)),o.activeShape.polygon.material=t.polygon.material,o.activeShape.polygon.textureCoordinates=t.polygon.textureCoordinates}else if(t.polyline){o=new Pt(wt.viewer,r),e.allDrawings.push(o);const n=null==(a=t.polyline.positions)?void 0:a.getValue(_e.now());o.activeShapePoints.push(...e.cloneCartesian3(n)),o.activeShape=e.drawShape(o.activeShapePoints,"line",r,new xe(t.properties))}else t.position&&(o=new bt(wt.viewer,r),e.allDrawings.push(o),o.activeShapePoints.push(t.position.getValue(_e.now())),o.activeShape=e.createPoint(o.activeShapePoints[0],r,new xe(t.properties)));const l=o.floatingPoint;return l.entityCollection.remove(l),o&&o.stop(),wt.isdrawing=!1,n||r.remove(t),o}static createPoint(t,n,i){var a;const o=n.add({position:new Ve(()=>e.HeightReference===De.NONE?t:e.viewer.scene.clampToHeight(t),!1),billboard:{image:"icons/img/dragIcon.png",scale:1,color:ct},properties:i});return(null==(a=o.properties)?void 0:a.hasProperty("entity_id"))&&(o.properties.entity_id=o.id),o}static drawShape(t,n,i,a){var o;let r;return"line"===n?r=i.add({polyline:{positions:new Ve(function(){return t},!1),clampToGround:new Ve(function(){return e.HeightReference===De.CLAMP_TO_GROUND},!1),width:2,material:new Le(dt)},properties:a}):"polygon"===n&&(r=i.add(new ft(t,a))),(null==(o=r.properties)?void 0:o.hasProperty("entity_id"))&&(r.properties.entity_id=r.id),r}static computeRectPoint(e,t,n){const i=Re.fromCartesian(e),a=i.longitude,o=i.latitude,r=Re.fromCartesian(t),l=r.longitude,s=r.latitude,c=Re.fromCartesian(n),d=c.longitude,u=c.latitude,p=(d-a)*(d-a)+(u-o)*(u-o),g=(l-a)*(l-a)+(s-o)*(s-o),m=(d-l)*(d-l)+(u-s)*(u-s),v=Math.acos((m+g-p)/(2*Math.sqrt(m)*Math.sqrt(g)));if(Math.abs(v-Math.PI/2)>20/90)return n;const f=l-a,y=s-o,h=u-o,w=a-d,C=f*l+y*s,E=h*a+w*o,b=(C*w-E*y)/(f*w-y*h),P=(E*f-C*h)/(f*w-y*h);return Me.fromRadians(b,P)}static computedVerticalPoint(t,i,a,o){const r=Re.fromCartesian(t),l=r.longitude,s=r.latitude,c=Re.fromCartesian(i),d=c.longitude,u=c.latitude,p=Re.fromCartesian(a),g=p.longitude,m=p.latitude,v=Re.fromCartesian(o),f=v.longitude,y=v.latitude,h=y-m,w=g-f,C=d-l,E=u-s,b=h*g+w*m,P=C*l+E*s,S=(b*E-P*w)/(h*E-w*C),I=(P*h-b*C)/(h*E-w*C),k=n([f,y],[S,I]),D=n([l,s],[d,u]),M=e.HeightReference===De.CLAMP_TO_GROUND?e.viewer.scene.clampToHeight(Me.fromRadians(S,I)):Me.fromRadians(S,I);return 0!==D&&k/D<.05?(e.verticalVertex.relationPosition=M,wt.viewer.entities.contains(e.verticalVertex)||wt.viewer.entities.add(e.verticalVertex),M):(wt.viewer.entities.remove(e.verticalVertex),M)}static computeRectPoint_v2(t,n,i=0,a=20){if(t.length<3)return n;const o=t[t.length-2-i],r=t[t.length-1-i],l=n,s=Re.fromCartesian(o),c=s.longitude,d=s.latitude,u=Re.fromCartesian(r),p=u.longitude,g=u.latitude,m=Re.fromCartesian(l),v=m.longitude,f=m.latitude,y=(v-c)*(v-c)+(f-d)*(f-d),h=(p-c)*(p-c)+(g-d)*(g-d),w=(v-p)*(v-p)+(f-g)*(f-g),C=Math.acos((w+h-y)/(2*Math.sqrt(w)*Math.sqrt(h)));if(Math.abs(C-Math.PI/2)>a/90)return l;const E=p-c,b=g-d,P=f-d,S=c-v,I=E*p+b*g,k=P*c+S*d;if(E*S-b*P===0)return l;const D=(I*S-k*b)/(E*S-b*P),M=(k*E-I*P)/(E*S-b*P);return e.computedVerticalPoint(t[0],t[1],t[t.length-1-i],Me.fromRadians(D,M)),e.HeightReference===De.CLAMP_TO_GROUND?e.viewer.scene.clampToHeight(Me.fromRadians(D,M)):Me.fromRadians(D,M)}static captureVertexFromEntity(t,r){var l,s;if(r!==e.currentInstance.floatingPoint&&r.polygon){const s=null==(l=r.polygon.hierarchy)?void 0:l.getValue(_e.now()).positions,c=s.map(e=>{const t=Re.fromCartesian(e);return[Ae.toDegrees(t.longitude),Ae.toDegrees(t.latitude)]});if(c.push(c[0]),r==e.currentDrawing.activeShape){if(c.length<4)return;c.pop(),c.pop()}const d=i(c),u=Re.fromCartesian(t),p=a([Ae.toDegrees(u.longitude),Ae.toDegrees(u.latitude)]),g=o(d,p,{units:"degrees"});g.properties.index===d.geometry.coordinates.length-1&&(g.properties.index-=1);const m=d.geometry.coordinates[g.properties.index],v=d.geometry.coordinates[g.properties.index+1],f=n(p,g.geometry.coordinates),y=n(m,v);if(f/y>.1)return;e.viewer.entities.remove(e.vertex1),e.viewer.entities.remove(e.vertex2),e.viewer.entities.remove(e.midvertex);const h=s[g.properties.index%s.length],w=s[(g.properties.index+1)%s.length];e.vertex1.relationPosition=h,e.vertex2.relationPosition=w,e.midvertex.relationPosition=Me.lerp(h,w,.5,new Me),e.viewer.entities.add(e.vertex1),e.viewer.entities.add(e.vertex2),e.viewer.entities.add(e.midvertex);const C=n(m,g.geometry.coordinates);return Me.lerp(h,w,C/y,new Me)}if(r!==e.currentInstance.floatingPoint&&r.polyline){const l=null==(s=r.polyline.positions)?void 0:s.getValue(_e.now()),c=l.map(e=>{const t=Re.fromCartesian(e);return[Ae.toDegrees(t.longitude),Ae.toDegrees(t.latitude)]});if(r==e.currentDrawing.activeShape){if(c.length<3)return;c.pop()}const d=i(c),u=Re.fromCartesian(t),p=a([Ae.toDegrees(u.longitude),Ae.toDegrees(u.latitude)]),g=o(d,p,{units:"degrees"});g.properties.index===d.geometry.coordinates.length-1&&(g.properties.index-=1);const m=d.geometry.coordinates[g.properties.index],v=d.geometry.coordinates[g.properties.index+1],f=n(p,g.geometry.coordinates),y=n(m,v);if(f/y>.1)return;e.viewer.entities.remove(e.vertex1),e.viewer.entities.remove(e.vertex2),e.viewer.entities.remove(e.midvertex);const h=l[g.properties.index%l.length],w=l[(g.properties.index+1)%l.length];e.vertex1.relationPosition=h,e.vertex2.relationPosition=w,e.midvertex.relationPosition=Me.lerp(h,w,.5,new Me),e.viewer.entities.add(e.vertex1),e.viewer.entities.add(e.vertex2),e.viewer.entities.add(e.midvertex);const C=n(m,g.geometry.coordinates);return Me.lerp(h,w,C/y,new Me)}if(r!==e.currentInstance.floatingPoint&&r.position){const t=r.position.getValue(_e.now());return e.viewer.entities.remove(e.vertex1),e.viewer.entities.remove(e.vertex2),e.viewer.entities.remove(e.midvertex),e.vertex1.relationPosition=t,e.viewer.entities.add(e.vertex1),t}}};t(Ct,"HeightReference",De.NONE),t(Ct,"allDrawings",new Array),t(Ct,"currentDrawing"),t(Ct,"isRectangle",!1),t(Ct,"isCapture",!1),t(Ct,"captureBuffer",20),t(Ct,"vertex1",new yt(Me.fromDegrees(0,90),"icons/img/dragIcon.png")),t(Ct,"vertex2",new yt(Me.fromDegrees(0,90),"icons/img/dragIcon.png")),t(Ct,"midvertex",new yt(Me.fromDegrees(0,90),"icons/img/rectangle1.png")),t(Ct,"verticalVertex",new yt(Me.fromDegrees(0,90),"icons/img/dragIcon.png"));let Et=Ct;class bt extends Et{constructor(e,t,n,i){super(e,t,n,i),n&&(this.activeShape=Et.createPoint(n[0],t,this.properties)),wt.isdrawing=!0}click(e,t){const n=bt.viewer;let i=n.scene.pickPosition(t.position);if(Oe(i)){if(Et.isCapture){const a=n.scene.drillPick(t.position,10,Et.captureBuffer,Et.captureBuffer).find(t=>t.id&&t.id!==e.floatingPoint);if(a&&a.id){const e=Et.captureVertexFromEntity(i,a.id);i=e||i}else wt.viewer.entities.remove(Et.vertex1),wt.viewer.entities.remove(Et.vertex2),wt.viewer.entities.remove(Et.midvertex),wt.viewer.entities.remove(Et.verticalVertex)}e.activeShapePoints.push(i),e.activeShape=Et.createPoint(i,e.owner,e.properties),e.activeShape.properties=e.properties,wt.isdrawing=!1,n.entities.remove(this.floatingPoint),super.stop(),new bt(n,e.owner,void 0,e.activeShape.properties)}}move(e,t){const n=bt.viewer;if(Oe(e.floatingPoint)){let i=n.scene.pickPosition(t.endPosition);if(Oe(i)){if(Et.isCapture){const a=n.scene.drillPick(t.endPosition,10,Et.captureBuffer,Et.captureBuffer).find(t=>t.id&&t.id!==e.floatingPoint);if(a&&a.id){const e=Et.captureVertexFromEntity(i,a.id);i=e||i}else wt.viewer.entities.remove(Et.vertex1),wt.viewer.entities.remove(Et.vertex2),wt.viewer.entities.remove(Et.midvertex),wt.viewer.entities.remove(Et.verticalVertex)}e.floatingPoint.relationPosition=i}}}updateVertex(e,t){this.activeShape.position=t,this.activeShapePoints[0]=t}deleteVertex(e){this.destroy()}moveShape(e){this.activeShapePoints[0].x+=e.x,this.activeShapePoints[0].y+=e.y,this.activeShapePoints[0].z+=e.z,this.activeShape.position=this.activeShapePoints[0]}beSelected(){this.activeShape.point.color=lt}beUnselected(){this.activeShape.point.color=ct}}class Pt extends Et{constructor(e,t,n,i){super(e,t,n,i),n&&(this.activeShape=Et.drawShape(this.activeShapePoints,"line",t,this.properties)),wt.isdrawing=!0}click(e,t){const n=Pt.viewer;let i=n.scene.pickPosition(t.position);if(Oe(i)){if(Et.isCapture){const a=n.scene.drillPick(t.position,10,Et.captureBuffer,Et.captureBuffer).find(t=>t.id&&t.id!==e.floatingPoint);if(a&&a.id){const e=Et.captureVertexFromEntity(i,a.id);i=e||i}else wt.viewer.entities.remove(Et.vertex1),wt.viewer.entities.remove(Et.vertex2),wt.viewer.entities.remove(Et.midvertex),wt.viewer.entities.remove(Et.verticalVertex)}0===e.activeShapePoints.length&&(e.activeShapePoints.push(i),e.activeShape=Et.drawShape(e.activeShapePoints,"line",e.owner,e.properties)),e.activeShapePoints.push(i)}}move(e,t){const n=Pt.viewer;if(Oe(e.floatingPoint)){let i=n.scene.pickPosition(t.endPosition);if(Oe(i)){if(Et.isCapture){const a=n.scene.drillPick(t.endPosition,10,Et.captureBuffer,Et.captureBuffer).find(t=>t.id&&t.id!==e.floatingPoint);if(a&&a.id){const e=Et.captureVertexFromEntity(i,a.id);i=e||i}else wt.viewer.entities.remove(Et.vertex1),wt.viewer.entities.remove(Et.vertex2),wt.viewer.entities.remove(Et.midvertex),wt.viewer.entities.remove(Et.verticalVertex)}e.floatingPoint.relationPosition=i,e.activeShapePoints.length>1&&(e.activeShapePoints.pop(),e.activeShapePoints.push(i))}}}dbclick(e,t){const n=Pt.viewer;e.activeShapePoints.pop(),e.activeShapePoints.pop(),e.activeShape.properties=e.properties,n.entities.remove(this.floatingPoint),wt.isdrawing=!1,this.stop(),new Pt(n,e.owner,void 0,e.activeShape.properties)}deleteVertex(e){this.activeShapePoints.length>2?this.activeShapePoints.splice(e,1):this.destroy()}beSelected(){this.activeShape.polyline.material=new Le(lt)}beUnselected(){this.activeShape.polyline.material=new Le(dt)}}class St extends Et{constructor(e,n,i,a){super(e,n,i,a),t(this,"currentMatiral"),i&&(this.activeShape=Et.drawShape(this.activeShapePoints,"polygon",n,this.properties)),wt.isdrawing=!0}click(e,t){const n=St.viewer;let i=n.scene.pickPosition(t.position);if(Oe(i)){if(Et.isCapture){const a=n.scene.drillPick(t.position,10,Et.captureBuffer,Et.captureBuffer).find(t=>t.id&&t.id!==e.floatingPoint);if(a&&a.id){const e=Et.captureVertexFromEntity(i,a.id);i=e||i}else wt.viewer.entities.remove(Et.vertex1),wt.viewer.entities.remove(Et.vertex2),wt.viewer.entities.remove(Et.midvertex),wt.viewer.entities.remove(Et.verticalVertex)}0===e.activeShapePoints.length&&(e.activeShapePoints.push(i),e.activeShape=Et.drawShape(e.activeShapePoints,"polygon",e.owner,e.properties)),e.activeShapePoints.push(i)}}move(e,t){const n=St.viewer;if(Oe(e.floatingPoint)){let i=n.scene.pickPosition(t.endPosition);if(Oe(i)){if(Et.isCapture){const a=n.scene.drillPick(t.endPosition,10,Et.captureBuffer,Et.captureBuffer).find(t=>t.id&&t.id!==e.floatingPoint);if(a&&a.id){const e=Et.captureVertexFromEntity(i,a.id);i=e||i}else wt.viewer.entities.remove(Et.vertex1),wt.viewer.entities.remove(Et.vertex2),wt.viewer.entities.remove(Et.midvertex),wt.viewer.entities.remove(Et.verticalVertex)}e.floatingPoint.relationPosition=i,e.activeShapePoints.length>1&&(e.activeShapePoints.pop(),e.activeShapePoints.push(i))}}}dbclick(e,t){const n=St.viewer;e.activeShapePoints.pop(),e.activeShapePoints.pop(),e.activeShape.properties=e.properties,n.entities.remove(this.floatingPoint),wt.isdrawing=!1,super.stop(),new St(n,e.owner,void 0,e.activeShape.properties)}deleteVertex(e){this.activeShapePoints.length>3?this.activeShapePoints.splice(e,1):this.destroy()}beSelected(){this.activeShape.polygon.material&&(this.currentMatiral=this.activeShape.polygon.material),this.activeShape.polygon.material=new Le(lt)}beUnselected(){this.currentMatiral?this.activeShape.polygon.material=this.currentMatiral:this.activeShape.polygon.material=new Le(st)}}class It extends Qe{constructor(e){super(e),t(this,"Billboards"),this.Billboards=new Array}add(e){const t=super.add(e);return this.Billboards.push(t),t}remove(e){const t=this.Billboards.indexOf(e);return this.Billboards.splice(t,1),super.remove(e)}removeAll(){return this.Billboards.splice(0,this.Billboards.length),super.removeAll()}}const kt=class e extends wt{setupHandle(){let e;new We(wt.viewer.canvas).setInputAction(function(t){const n=wt.viewer.scene.pick(t.endPosition);n&&n.primitive&&n.primitive instanceof ze?(n.primitive.scale=1.2,e&&e!==n.primitive&&(e.scale=1),e=n.primitive):e&&e.scale&&(e.scale=1)},qe.MOUSE_MOVE)}constructor(t){super(t);const n=new et("markers"),i=new et("editMarkers");t.dataSources.add(n).then(e=>{t.dataSources.raiseToTop(e)}),t.dataSources.add(i).then(e=>{t.dataSources.raiseToTop(e)}),e.Markers=n.entities,e.editMarkers=i.entities,this.setupHandle()}static getInstance(t){return e.instance||(e.instance=new e(t)),wt.isdrawing&&wt.currentInstance.clear(),wt.currentInstance!==e.instance&&(wt.currentInstance=e.instance,e.instance.start()),e.init(),e.instance}static init(){var t,n;wt.isdrawing=!0,null==(t=e.Markers)||t.removeAll(),null==(n=e.editMarkers)||n.removeAll(),e.currentDrawingInstance=void 0,e.readyCopy=!1,wt.viewer.entities.remove(Et.vertex1),wt.viewer.entities.remove(Et.vertex2),wt.viewer.entities.remove(Et.midvertex),wt.viewer.entities.remove(Et.verticalVertex)}static edit(t){if(t){e.init(),e.currentDrawingInstance=t,wt.currentInstance=e.instance,e.points=t.activeShapePoints;for(let n=0;n<t.activeShapePoints.length;n++){const i=t.activeShapePoints[n];e.Markers.add(new yt(i,"icons/img/dragIcon.png")),(t instanceof Pt||t instanceof St)&&e.editMarkers.add(new yt(e.calculateHalfMarkerPosition(n),"icons/img/dragIconLight.png"))}t instanceof Pt&&e.editMarkers.remove(e.editMarkers.values[e.editMarkers.values.length-1])}}static calculateHalfMarkerPosition(t){const n=e.points;return Me.lerp(n[t],n[t<n.length-1?t+1:0],.5,new Me)}static updateHalfMarkers(t){const n=e.points;let i=t-1<0?n.length-1:t-1;if(i<e.editMarkers.values.length){const t=e.calculateHalfMarkerPosition(i);e.editMarkers.values[i].relationPosition.x=t.x,e.editMarkers.values[i].relationPosition.y=t.y,e.editMarkers.values[i].relationPosition.z=t.z}if(i=t,i<e.editMarkers.values.length){const t=e.calculateHalfMarkerPosition(i);e.editMarkers.values[i].relationPosition.x=t.x,e.editMarkers.values[i].relationPosition.y=t.y,e.editMarkers.values[i].relationPosition.z=t.z}}clear(){e.Markers.removeAll(),e.editMarkers.removeAll()}click(t,n){const i=e.viewer,a=i.scene.pickPosition(n.position);if(Oe(a)){const t=i.scene.pick(n.position,Et.captureBuffer,Et.captureBuffer);if(t){if(t.id&&!(t.id instanceof Vt))if(t.id instanceof yt){if(e.editMarkers.contains(t.id)){const n=e.editMarkers.values.indexOf(t.id);e.points.splice(n+1,0,a),e.edit(e.currentDrawingInstance)}}else{let n=Et.getDrawings(t.id);n||(n=Et.parseDrawings(t.id)),n&&n!==e.currentDrawingInstance&&(e.edit(n),e.instance.start())}}else e.init()}}move(t,n){const i=e.viewer;let a=i.scene.pickPosition(n.endPosition);if(Oe(a)){if(e.currentMarker){const o=e.Markers.values.indexOf(e.currentMarker);if(Et.isCapture){const e=i.scene.drillPick(n.endPosition,10,Et.captureBuffer,Et.captureBuffer).find(e=>e!==t.floatingPoint&&e.id);if(e&&e.id){const t=Et.captureVertexFromEntity(a,e.id);a=t||a}else wt.viewer.entities.remove(Et.vertex1),wt.viewer.entities.remove(Et.vertex2),wt.viewer.entities.remove(Et.midvertex),wt.viewer.entities.remove(Et.verticalVertex)}e.currentMarker.position=a,e.updateHalfMarkers(o),e.currentDrawingInstance.updateVertex(o,a)}if(e.currentEntity){const t=i.scene.pickPosition(n.startPosition),a=i.scene.pickPosition(n.endPosition);if(t&&a){const n=new Me(a.x-t.x,a.y-t.y,a.z-t.z);e.currentDrawingInstance.moveShape(n),e.edit(e.currentDrawingInstance)}}}}rclick(t,n){const i=e.viewer,a=i.scene.pickPosition(n.position);if(Oe(a)){const t=i.scene.pick(n.position,Et.captureBuffer,Et.captureBuffer);if(Oe(t)&&e.Markers.contains(t.id)){const n=e.Markers.values.indexOf(t.id);e.currentDrawingInstance.deleteVertex(n),e.edit(e.currentDrawingInstance)}}}mousedown(t,n){const i=e.viewer,a=i.scene.pickPosition(n.position);if(a){const t=i.scene.pick(n.position,Et.captureBuffer,Et.captureBuffer);if(t&&t.id&&!(t.id instanceof Vt)){if(e.Markers.contains(t.id)&&(e.currentMarker=t.id,e.viewer.scene.screenSpaceCameraController.enableRotate=!1,e.viewer.scene.screenSpaceCameraController.enableTranslate=!1),e.editMarkers.contains(t.id)){const n=e.editMarkers.values.indexOf(t.id);e.points.splice(n+1,0,a),e.edit(e.currentDrawingInstance),e.currentMarker=e.Markers.values[n+1],e.viewer.scene.screenSpaceCameraController.enableRotate=!1,e.viewer.scene.screenSpaceCameraController.enableTranslate=!1}if(t.id&&t.id instanceof Ne&&e.canMove){const n=Et.getDrawings(t.id);e.currentDrawingInstance&&e.currentDrawingInstance===n&&(e.currentEntity=t.id,e.viewer.scene.screenSpaceCameraController.enableRotate=!1,e.viewer.scene.screenSpaceCameraController.enableTranslate=!1)}}}}mouseup(t,n){e.currentMarker&&(e.currentMarker=void 0,e.currentEntity=void 0),e.currentEntity&&(e.currentEntity=void 0),e.viewer.scene.screenSpaceCameraController.enableRotate=!0,e.viewer.scene.screenSpaceCameraController.enableTranslate=!0}keydown(t){switch(t.key){case"Delete":if(e.currentDrawingInstance&&e.currentDrawingInstance.destroy){if(!confirm("确定删除？"))return;e.currentDrawingInstance.destroy(),e.init()}break;case"C":case"c":e.currentDrawingInstance&&t.ctrlKey&&(e.readyCopy=!0);break;case"V":case"v":if(e.currentDrawingInstance&&t.ctrlKey&&e.readyCopy){const t=Et.parseDrawings(e.currentDrawingInstance.activeShape,!0);e.edit(t),e.instance.start(),Et.isdrawing=!0,e.readyCopy=!1}}}};t(kt,"Markers"),t(kt,"editMarkers"),t(kt,"canMove",!1),t(kt,"currentEntity"),t(kt,"points"),t(kt,"readyCopy",!1),t(kt,"currentDrawingInstance"),t(kt,"currentMarker"),t(kt,"instance");let Dt=kt;const Mt=class e extends wt{constructor(e){super(e)}static getInstance(t){return e.instance||(e.instance=new e(t)),wt.isdrawing&&wt.currentInstance.clear(),wt.currentInstance=e.instance,wt.isdrawing=!0,e.instance.start(),e.instance}clear(){e.drowings.forEach(e=>{Ut.dehightlightEntity(e)}),e.drowings=[]}click(t,n){this.clear();const i=wt.viewer.scene.pick(n.position);i&&i.id&&i.id instanceof Ne&&(!i.id.polygon||i.id instanceof Vt||(e.drowings.push(i.id),Ut.hightlightEntity(i.id)))}click_ctrl(t,n){const i=wt.viewer.scene.pick(n.position);i&&i.id&&i.id instanceof Ne&&(!i.id.polygon||i.id instanceof Vt||(e.drowings.push(i.id),Ut.hightlightEntity(i.id),e.uionPolygon(e.drowings)))}static uionPolygon(e){if(e.every((e,t,n)=>r(e.entityCollection)===r(n[0].entityCollection))){const t=new Array;e.forEach((e,n,i)=>{var a,o;const r=null==(o=null==(a=e.polygon)?void 0:a.hierarchy)?void 0:o.getValue(_e.now()).positions;t.push(Ut.toTurfPolygon(r))});const n=l(s(t));"Polygon"===(null==n?void 0:n.geometry.type)&&(Ut.toPolygonDrawing(n.geometry.coordinates[0],e[0].entityCollection,e[0].properties),e.forEach(e=>{Ut.dehightlightEntity(e)}),confirm("是否删除原来要素")&&e.forEach((e,t,n)=>{e.entityCollection.remove(e)}))}else alert("请选择同图层面")}};t(Mt,"drowings",new Array),t(Mt,"instance");let xt=Mt;const Tt=class e extends wt{constructor(e){super(e)}static getInstance(t){return e.instance||(e.instance=new e(t)),wt.isdrawing&&wt.currentInstance.clear(),wt.currentInstance=e.instance,wt.isdrawing=!0,e.instance.start(),e.instance}clear(){e.drowings.forEach(e=>{Ut.dehightlightEntity(e)}),e.drowings=[]}click(t,n){this.clear();const i=wt.viewer.scene.pick(n.position);i&&i.id&&i.id instanceof Ne&&(!i.id.polygon&&!i.id.polyline||i.id instanceof Vt||(e.drowings.push(i.id),Ut.hightlightEntity(i.id)))}click_ctrl(t,n){const i=wt.viewer.scene.pick(n.position);i&&i.id&&i.id instanceof Ne&&i.id.polyline&&-1===e.drowings.indexOf(i.id)&&(e.drowings.push(i.id),Ut.hightlightEntity(i.id),e.drowings[0].polygon?e.slicePolygon(e.drowings):e.drowings[0].polyline&&e.sliceLine(e.drowings))}static slicePolygon(e){var t,n,i,a;const o=null==(n=null==(t=e[0].polygon)?void 0:t.hierarchy)?void 0:n.getValue(_e.now()).positions,r=Ut.toTurfPolygon(o),l=Ut.toTurfLine(null==(a=null==(i=e[1].polyline)?void 0:i.positions)?void 0:a.getValue(_e.now())),s=c(r,l);if(s.geometry.coordinates.length>1){const t=s.geometry;for(let n=0;n<t.coordinates.length;n++){const i=t.coordinates[n][0];Ut.toPolygonDrawing(i,e[0].entityCollection,e[0].properties)}e.forEach(e=>{Ut.dehightlightEntity(e)}),confirm("是否删除原来要素")&&e.forEach((e,t,n)=>{e.entityCollection.remove(e)})}}static sliceLine(e){var t,n,i,a;const o=Ut.toTurfLine(null==(n=null==(t=e[0].polyline)?void 0:t.positions)?void 0:n.getValue(_e.now())),r=Ut.toTurfLine(null==(a=null==(i=e[1].polyline)?void 0:i.positions)?void 0:a.getValue(_e.now())),l=d(o,r);l.features.length>1&&l.features.forEach((t,n,i)=>{Ut.toLineDrawing(t.geometry.coordinates,e[0].entityCollection,e[0].properties)}),e.forEach(e=>{Ut.dehightlightEntity(e)}),confirm("是否删除原来要素")&&e.forEach((e,t,n)=>{e.entityCollection.remove(e)})}};t(Tt,"drowings",new Array),t(Tt,"instance");let _t=Tt;class Vt extends Ne{constructor(e,n){super(),t(this,"c1"),t(this,"c2"),t(this,"c3"),t(this,"c4"),t(this,"transparent",1);const i=this;this.c1=Me.fromDegrees(e.coor1.x,e.coor1.y),this.c2=Me.fromDegrees(e.coor2.x,e.coor2.y),this.c3=Me.fromDegrees(e.coor3.x,e.coor3.y),this.c4=Me.fromDegrees(e.coor4.x,e.coor4.y),this.polyline=new Ue({positions:new Ve(function(){const e=new Array;return e.push(i.c1),e.push(i.c2),e.push(i.c3),e.push(i.c4),e.push(i.c1),e},!1),material:new Le(pt),width:new Ge(1),show:new Ge(!1)}),this.polygon=new $e,this.polygon.hierarchy=new Ve(function(){const e=new Array;return e.push(i.c1),e.push(i.c2),e.push(i.c3),e.push(i.c4),new Je(e)},!1),this.polygon.material=new Be({image:n,color:new Ve(function(){return new ke(1,1,1,i.transparent)},!1)}),this.polygon.height=new Ge(0),this.polygon.zIndex=new Ge(-100),this.polygon.textureCoordinates=new Ve(function(){const e=new Array;return e.push(Me.fromArray([1,0,0])),e.push(Me.fromArray([1,1,0])),e.push(Me.fromArray([0,1,0])),e.push(Me.fromArray([0,0,0])),new Je(e)},!1)}getlnglatCoors(){return{lnglat1:Re.fromCartesian(this.c1),lnglat2:Re.fromCartesian(this.c2),lnglat3:Re.fromCartesian(this.c3),lnglat4:Re.fromCartesian(this.c4)}}getCenter(){return Rt.centerpos=Fe.fromPoints([this.c1,this.c2,this.c3,this.c4]).center,Rt.centerpos}moveImage(e){const t=He.fromTranslation(e);He.multiplyByPoint(t,this.c1,this.c1),He.multiplyByPoint(t,this.c2,this.c2),He.multiplyByPoint(t,this.c3,this.c3),He.multiplyByPoint(t,this.c4,this.c4)}roateImage(e){const t=this.getlnglatCoors();e=Ae.toDegrees(-e);const n=u(p([[[t.lnglat1.longitude,t.lnglat1.latitude],[t.lnglat2.longitude,t.lnglat2.latitude],[t.lnglat3.longitude,t.lnglat3.latitude],[t.lnglat4.longitude,t.lnglat4.latitude],[t.lnglat1.longitude,t.lnglat1.latitude]]]),e,{pivot:a([t.lnglat1.longitude,t.lnglat1.latitude])}).geometry.coordinates[0];this.c1=Me.fromRadians(n[0][0],n[0][1]),this.c2=Me.fromRadians(n[1][0],n[1][1]),this.c3=Me.fromRadians(n[2][0],n[2][1]),this.c4=Me.fromRadians(n[3][0],n[3][1])}scaleImage(e){const t=this.getlnglatCoors();t.lnglat1;const n=g(p([[[t.lnglat1.longitude,t.lnglat1.latitude],[t.lnglat2.longitude,t.lnglat2.latitude],[t.lnglat3.longitude,t.lnglat3.latitude],[t.lnglat4.longitude,t.lnglat4.latitude],[t.lnglat1.longitude,t.lnglat1.latitude]]]),e,{origin:a([t.lnglat1.longitude,t.lnglat1.latitude])}).geometry.coordinates[0];this.c1=Me.fromRadians(n[0][0],n[0][1]),this.c2=Me.fromRadians(n[1][0],n[1][1]),this.c3=Me.fromRadians(n[2][0],n[2][1]),this.c4=Me.fromRadians(n[3][0],n[3][1])}}const Lt=class e extends wt{constructor(e){super(e)}static init(){e.billCollection.removeAll(),e.currentImageEntity=void 0}static getInstance(t){return e.instance||(e.instance=new e(t),e.billCollection=new It,t.scene.primitives.add(e.billCollection),t.scene.primitives.raiseToTop(e.billCollection)),wt.isdrawing&&wt.currentInstance.clear(),wt.currentInstance=e.instance,wt.isdrawing=!0,e.init(),wt.currentInstance.start(),e.instance}static edit(t){e.init(),e.currentImageEntity=t;const n=e.currentImageEntity.getCenter();e.panMarker=new ze({position:n,image:"icons/img/move.png",color:pt,scale:1.5,disableDepthTestDistance:1/0},e.billCollection),e.billCollection.add(e.panMarker),e.roateMarker=new ze({position:e.currentImageEntity.c3,image:"icons/img/roate.png",color:pt,scale:1.5,disableDepthTestDistance:1/0},e.billCollection),e.billCollection.add(e.roateMarker),e.zoomMarker=new ze({position:e.currentImageEntity.c3,pixelOffset:new Ke(0,50),image:"icons/img/zoom.png",color:pt,scale:1.5,disableDepthTestDistance:1/0},e.billCollection),e.billCollection.add(e.zoomMarker)}clear(){e.billCollection.removeAll()}click(t,n){const i=wt.viewer.scene.pick(n.position);i&&i.id instanceof Vt?e.edit(i.id):e.init()}mousedown(t,n){const i=wt.viewer.scene.pick(n.position);i&&(i.primitive===e.panMarker&&(Dt.viewer.scene.screenSpaceCameraController.enableRotate=!1,Dt.viewer.scene.screenSpaceCameraController.enableTranslate=!1,e.canMove=!0),i.primitive===e.roateMarker&&(Dt.viewer.scene.screenSpaceCameraController.enableRotate=!1,Dt.viewer.scene.screenSpaceCameraController.enableTranslate=!1,e.canRoate=!0),i.primitive===e.zoomMarker&&(Dt.viewer.scene.screenSpaceCameraController.enableRotate=!1,Dt.viewer.scene.screenSpaceCameraController.enableTranslate=!1,e.canZoom=!0))}move(t,n){const i=e.viewer.scene.pickPosition(n.startPosition),a=e.viewer.scene.pickPosition(n.endPosition);if(i&&a&&e.currentImageEntity){if(e.canMove){const t=new Me;Me.subtract(a,i,t),e.currentImageEntity.moveImage(t)}if(e.canRoate){const t=e.currentImageEntity.getCenter(),n=Me.subtract(i,t,i),o=Me.subtract(a,t,a),r=Math.sign(Me.cross(o,n,new Me).z),l=-Me.angleBetween(o,n)*r;e.currentImageEntity.roateImage(l)}if(e.canZoom){const t=e.currentImageEntity.getCenter(),n=Me.distance(i,t),o=Me.distance(a,t)/n;e.currentImageEntity.scaleImage(o)}e.edit(e.currentImageEntity)}}mouseup(t,n){Dt.viewer.scene.screenSpaceCameraController.enableRotate=!0,Dt.viewer.scene.screenSpaceCameraController.enableTranslate=!0,e.canMove=!1,e.canRoate=!1,e.canZoom=!1}keydown(t){if("Delete"===t.key)e.currentImageEntity&&confirm("确认删除？")&&(e.currentImageEntity.entityCollection.remove(e.currentImageEntity),e.init())}};t(Lt,"instance"),t(Lt,"currentImageEntity"),t(Lt,"billCollection"),t(Lt,"roateMarker"),t(Lt,"panMarker"),t(Lt,"zoomMarker"),t(Lt,"centerpos"),t(Lt,"canMove"),t(Lt,"canRoate"),t(Lt,"canZoom");let Rt=Lt;const At=class e extends wt{constructor(e){super(e)}static init(){e.pointPairs.splice(0,e.pointPairs.length),e.currentImageEntity&&(e.currentImageEntity.polyline.show=new Ge(!1)),e.currentImageEntity=void 0,e.billCollection.removeAll()}static getInstance(t){return e.instance||(e.instance=new e(t),e.billCollection=new It,t.scene.primitives.add(e.billCollection),t.scene.primitives.raiseToTop(e.billCollection)),wt.isdrawing&&wt.currentInstance.clear(),wt.currentInstance=e.instance,wt.isdrawing=!0,e.init(),wt.currentInstance.start(),e.instance}static edit(t){e.init(),e.currentImageEntity=t,e.currentImageEntity.polyline.show=new Ge(!0)}clear(){e.init()}click(t,n){const i=e.viewer.scene.drillPick(n.position),a=i.find(e=>e.id instanceof Vt);if(a&&a.id!==e.currentImageEntity&&0===e.pointPairs.length)e.edit(a.id);else{const t=e.viewer.scene.pickPosition(n.position);if(t&&e.currentImageEntity){if(e.pointPairs.length%2==0){if(!i.find(t=>t.id===e.currentImageEntity))return void e.init();e.billCollection.add({position:t,image:"icons/img/cross.png",color:ke.BLUE,scale:1.5,heightReference:Et.HeightReference,disableDepthTestDistance:1/0})}else e.billCollection.add({position:t,image:"icons/img/cross.png",color:ke.RED,scale:1.5,heightReference:Et.HeightReference,disableDepthTestDistance:1/0});e.pointPairs.push(t),6===e.pointPairs.length&&(e.AffineTransform(e.currentImageEntity,e.pointPairs),wt.currentInstance.clear(),wt.currentInstance.stop(),wt.isdrawing=!1)}}}move(e,t){}static AffineTransform(e,t){const n=t.map(e=>{const t=Re.fromCartesian(e);return Me.fromElements(t.longitude,t.latitude,1)}),i=nt.fromColumnMajorArray([n[0].x,n[0].y,n[0].z,n[2].x,n[2].y,n[2].z,n[4].x,n[4].y,n[4].z]),a=nt.fromColumnMajorArray([n[1].x,n[1].y,n[1].z,n[3].x,n[3].y,n[3].z,n[5].x,n[5].y,n[5].z]),o=nt.inverse(i,new nt),r=nt.multiply(a,o,new nt),l=Re.fromCartesian(e.c1),s=Re.fromCartesian(e.c2),c=Re.fromCartesian(e.c3),d=Re.fromCartesian(e.c4),u=nt.multiplyByVector(r,Me.fromElements(l.longitude,l.latitude,1),new Me),p=nt.multiplyByVector(r,Me.fromElements(s.longitude,s.latitude,1),new Me),g=nt.multiplyByVector(r,Me.fromElements(c.longitude,c.latitude,1),new Me),m=nt.multiplyByVector(r,Me.fromElements(d.longitude,d.latitude,1),new Me);e.c1=Me.fromRadians(u.x,u.y),e.c2=Me.fromRadians(p.x,p.y),e.c3=Me.fromRadians(g.x,g.y),e.c4=Me.fromRadians(m.x,m.y)}};t(At,"instance"),t(At,"currentImageEntity"),t(At,"pointPairs",[]),t(At,"billCollection");let Ot=At;class Nt{static getShp(e){return t=this,n=null,i=function*(){const t=yield m(e);return t.features.forEach((e,t,n)=>{for(const i in e.properties)e.properties[i]instanceof Date&&(e.properties[i]=v(e.properties[i]).format("YYYY-MM-DD HH:mm:ss"))}),tt.load(t)},new Promise((e,a)=>{var o=e=>{try{l(i.next(e))}catch(t){a(t)}},r=e=>{try{l(i.throw(e))}catch(t){a(t)}},l=t=>t.done?e(t.value):Promise.resolve(t.value).then(o,r);l((i=i.apply(t,n)).next())});var t,n,i}}class Ut{static toTurfPolygon(e){const t=new Array;return e.forEach((e,n,i)=>{const a=Re.fromCartesian(e);t.push([a.longitude,a.latitude])}),t.push(t[0]),p([t])}static toPolygonDrawing(e,t,n){const i=new Array;e.forEach((e,t,n)=>{const a=Re.fromRadians(e[0],e[1]);i.push(Re.toCartesian(a))}),i.pop();const a=new St(wt.viewer,t,i,n);return a.floatingPoint.entityCollection.remove(a.floatingPoint),a&&a.stop(),wt.isdrawing=!1,a}static toLineDrawing(e,t,n){const i=new Array;e.forEach((e,t,n)=>{const a=Re.fromRadians(e[0],e[1]);i.push(Re.toCartesian(a))});const a=new Pt(wt.viewer,t,i,n);return a.floatingPoint.entityCollection.remove(a.floatingPoint),a&&a.stop(),wt.isdrawing=!1,a}static toTurfLine(e){const t=new Array;return e.forEach((e,n,i)=>{const a=Re.fromCartesian(e);t.push([a.longitude,a.latitude])}),i(t)}static isProxy(e){return"[object Proxy]"===Object.prototype.toString.call(e)}static dehightlightEntity(e){e.polygon?e.polygon.material=new Le(st):e.polyline?e.polyline.material=new Le(dt):e.position&&(e.point&&(e.point.color=ct),e.billboard&&(e.billboard.color=ct))}static hightlightEntity(e){e.polygon?(e.polygon.currentMaterial=e.polygon.material,e.polygon.material=new Le(lt)):e.polyline?(e.polyline.currentMaterial=e.polyline.material,e.polyline.material=new Le(lt)):e.position&&(e.point&&(e.point.currentColor=e.point.color,e.point.color=lt),e.billboard&&(e.billboard.currentColor=e.billboard.color,e.billboard.color=lt))}static waitForEntityRemoval(e,t=100,n=5e3){return new Promise((i,a)=>{const o=setInterval(()=>{e.entityCollection.contains(e)||(clearInterval(o),clearTimeout(r),i(void 0))},t),r=setTimeout(()=>{clearInterval(o),a(new Error("Timeout: Entity was not removed in the given time."))},n)})}}const Gt=class e extends wt{constructor(e){super(e)}static getInstance(t){return e.instance||(e.instance=new e(t)),wt.isdrawing&&wt.currentInstance.clear(),wt.currentInstance=e.instance,wt.isdrawing=!1,e.instance.start(),e.instance}};t(Gt,"instance");let $t=Gt;const Bt=class e extends wt{constructor(e){super(e)}clear(){e.selectedEntity&&(e.setEntityUnselected(e.selectedEntity),e.selectedEntity=void 0)}static setEntitySelected(t){e.selectedEntity=t,t._isSelected=!0,Ut.hightlightEntity(t)}static setEntityUnselected(t){e.selectedEntity=void 0,t._isSelected=!1,Ut.dehightlightEntity(t)}static getInstance(t){return e.instance||(e.instance=new e(t)),wt.isdrawing&&wt.currentInstance.clear(),wt.isdrawing=!0,e.instance.clear(),e.instance.stop(),wt.currentInstance=e.instance,e.instance.start(),e.instance}click(t,n){e.instance.clear();const i=e.viewer.scene.pick(n.position);i&&(i.id._isSelected?e.setEntityUnselected(i.id):e.setEntitySelected(i.id))}};t(Bt,"instance"),t(Bt,"selectedEntity"),t(Bt,"positions",new Array),t(Bt,"rectEntity");const Ft=class e extends wt{constructor(e){super(e)}clear(){e.selectedEntities.forEach(t=>{e.setEntityUnselected(t)}),e.selectedEntities.clear(),e.positions.splice(0,e.positions.length)}static createRectangle(){return new Ne({id:"rectangle",rectangle:{coordinates:new Ve(function(){return je.fromDegrees(Math.min(e.positions[0].x,e.positions[1].x),Math.min(e.positions[0].y,e.positions[1].y),Math.max(e.positions[0].x,e.positions[1].x),Math.max(e.positions[0].y,e.positions[1].y))},!1),material:ke.RED.withAlpha(.3)}})}static setEntitySelected(t){e.selectedEntities.add(t),t._isSelected=!0,Ut.hightlightEntity(t)}static setEntityUnselected(t){e.selectedEntities.delete(t),t._isSelected=!1,Ut.dehightlightEntity(t)}static getInstance(t,n){return e.instance||(e.instance=new e(t)),wt.isdrawing&&wt.currentInstance.clear(),wt.isdrawing=!0,e.instance.clear(),e.instance.stop(),wt.currentInstance=e.instance,e.instance.start(),e.layer=n,e.instance}static selectAllEntities(){e.layer.values.forEach(t=>{e.setEntitySelected(t)})}static toDegree(e){const t=Re.fromCartesian(e),n=Ae.toDegrees(t.longitude),i=Ae.toDegrees(t.latitude);return new Ke(n,i)}mousedown(t,n){const i=e.viewer.scene.pick(n.position);if(i&&i.id&&e.selectedEntities.has(i.id)&&Dt.canMove){e.isMoving=!0,e.viewer.scene.screenSpaceCameraController.enableRotate=!1,e.viewer.scene.screenSpaceCameraController.enableTranslate=!1;const t=new Set,n=new Set;[...e.selectedEntities].forEach(e=>{if(void 0===Et.getDrawings(e)){t.add(e);const i=Et.parseDrawings(e,!0);n.add(i.activeShape),Ut.hightlightEntity(i.activeShape)}}),t.forEach(t=>{e.selectedEntities.delete(t),t.entityCollection.remove(t)}),n.forEach(t=>{e.selectedEntities.add(t)}),e.instance.start(),wt.currentInstance=e.instance,wt.isdrawing=!0}else{e.instance.clear();const t=e.viewer.scene.pickPosition(n.position);if(t){const n=e.toDegree(t);e.positions.push(n),e.positions.push(n),e.rectEntity=e.createRectangle(),e.viewer.entities.add(e.rectEntity),e.viewer.scene.screenSpaceCameraController.enableRotate=!1,e.viewer.scene.screenSpaceCameraController.enableTranslate=!1}}}move(t,n){if(e.isMoving)e.selectedEntities.forEach(t=>{const i=Et.getDrawings(t),a=e.viewer.scene.pickPosition(n.startPosition),o=e.viewer.scene.pickPosition(n.endPosition);if(a&&o){const e=new Me(o.x-a.x,o.y-a.y,o.z-a.z);i.moveShape(e)}});else if(e.positions.length>1){const t=e.viewer.scene.pickPosition(n.endPosition);if(t){const n=e.toDegree(t);e.positions.pop(),e.positions.push(n)}}}static translateEntity(e,t){var n;if(e.polygon){const i=null==(n=e.polygon.hierarchy)?void 0:n.getValue(_e.now()).positions.map(e=>He.multiplyByPoint(t,e,new Me));e.polygon.hierarchy=new Ge(new Je(i))}if(e.polyline){const n=e.polyline.positions.getValue(_e.now()).map(e=>He.multiplyByPoint(t,e,new Me));e.polyline.positions=new Ge(n)}if(e.position){const n=e.position.getValue(_e.now());e.position=He.multiplyByPoint(t,n,new Me)}}static getPointFromEntity(e){if(e.polygon)return{type:"polygon",coors:e.polygon.hierarchy.getValue(_e.now()).positions};if(e.polyline)return{type:"polyline",coors:e.polyline.positions.getValue(_e.now())};if(e.position){return{type:"point",coors:[e.position.getValue(_e.now())]}}return{type:void 0,coors:void 0}}static convert2ConstEntity(e){var t;const n=e.activeShape,i=new Ne;if(n.polygon){const e=null==(t=n.polygon.hierarchy)?void 0:t.getValue(_e.now()).positions;i.polygon=new $e({hierarchy:new Je(e),heightReference:void 0,material:new Le(st),outline:!0,outlineColor:ut,outlineWidth:1})}if(n.polyline){const e=n.polyline.positions.getValue(_e.now());i.polyline=new Ue({positions:e,clampToGround:void 0,material:new Le(dt),width:1})}if(n.position){const e=n.position.getValue(_e.now());i.position=e,i.billboard=new Ye({image:"icons/img/dragIcon.png",scale:1,color:ct})}return i.properties=Te(n.properties),n.entityCollection.add(i),i}mouseup(t,n){e.isMoving?e.isMoving=!1:(e.layer.values.forEach((t,n,i)=>{const{type:a,coors:o}=e.getPointFromEntity(t);if(!o)return;const r=Re.fromCartesian(Fe.fromPoints(o).center),l=e.rectEntity.rectangle.coordinates.getValue(_e.now());je.contains(l,r)&&e.setEntitySelected(t)}),e.viewer.entities.remove(e.rectEntity)),e.viewer.scene.screenSpaceCameraController.enableRotate=!0,e.viewer.scene.screenSpaceCameraController.enableTranslate=!0}click(t,n){const i=e.viewer.scene.drillPick(n.position).find(t=>t.id&&r(t.id.entityCollection)===e.layer);e.instance.clear(),i&&(i.id._isSelected?e.setEntityUnselected(i.id):e.setEntitySelected(i.id))}click_ctrl(t,n){const i=e.viewer.scene.drillPick(n.position).find(t=>t.id&&r(t.id.entityCollection)===e.layer);i&&(i.id._isSelected?e.setEntityUnselected(i.id):e.setEntitySelected(i.id))}keydown(t){if("Delete"===t.key)confirm("确认删除？")&&e.selectedEntities.forEach((e,t,n)=>{const i=Et.allDrawings.find(t=>t.activeShape===e);i&&i.destroy(),e.entityCollection.remove(e)})}};t(Ft,"instance"),t(Ft,"selectedEntities",new Set),t(Ft,"layer"),t(Ft,"positions",new Array),t(Ft,"isMoving",!1),t(Ft,"rectEntity");let Ht=Ft;const zt=f("mapviewer",()=>{const e=h(null),t=w(()=>{var t;return null==(t=e.value)?void 0:t.scene}),n=C([]),i=h(null),a=h(!1);return y(e,e=>{e&&(e.dataSources.dataSourceAdded.addEventListener((e,t)=>{n.push(t)}),e.dataSources.dataSourceRemoved.addEventListener((e,t)=>{const i=n.indexOf(t);i>-1&&n.splice(i,1)}))}),{Viewer:e,Scence:t,DataSources:n,setViewer:function(t){e.value=t},currentDataSource:i,setCurrentDataSource:function(e){i.value=e},isEditing:a,setIsEditing:function(e){a.value=e}}}),Kt={duration:2,enableCompass:!0,enableZoomControls:!0,enableDistanceLegend:!0,enableCompassOuterRing:!0,resetTooltip:"重置视图",zoomInTooltip:"放大",zoomOutTooltip:"缩小"},Yt={id:"cesiumContainer"},jt=E({__name:"MapControl",setup(e){window.CESIUM_BASE_URL="/giseditor/cesium";const t=zt();return b(()=>{const e=new at("cesiumContainer",{infoBox:!1,selectionIndicator:!1,targetFrameRate:30,timeline:!1,animation:!1,homeButton:!1,sceneModePicker:!1,navigationHelpButton:!1,fullscreenButton:!1});(e=>{new it(e,Kt)})(e),t.setViewer(e),e.cesiumWidget.creditContainer.style.display="none"}),(e,t)=>(P(),S("div",Yt))}}),Wt=I();var qt=(e=>(e.layerModified="layerModified",e.setCurrentLayer="setCurrentLayer",e.swithLangauge="swithLangauge",e))(qt||{});const Zt={class:"dialog-footer"},Jt="120px",Xt=E({__name:"CreateLayerDialog",setup(e){const{t:t}=k(),n=zt();let i=D("createLayerVisiable");const a=h({name:"",geotype:"",fields:Array()}),o=()=>{a.value.fields.push({name:"",type:mt.STRING})};b(()=>{a.value.name="",a.value.geotype=""});const r=()=>{if(""===a.value.name)return void ce.alert(t("infoMessage.inputLayername"));if(""===a.value.geotype)return void ce.alert(t("infoMessage.inputLayerType"));if(!1===a.value.fields.reduce((e,t)=>e&&""!==t.name&&""!==t.type,!0))return void ce.alert(t("infoMessage.inputFieldInfo"));if(!1===a.value.fields.reduce((e,t)=>e&&1===a.value.fields.filter(e=>e.name===t.name).length,!0))return void ce.alert(t("infoMessage.fieldRepeat"));const e=a.value.geotype,o=new vt(a.value.name,e,a.value.fields);n.Viewer.dataSources.add(o),n.currentDataSource=o,i.value=!1,o.entities.collectionChanged.addEventListener(e=>{Wt.emit(qt.layerModified,o)})};return(e,t)=>{const n=ae,l=ie,s=de,c=oe,d=le,u=se,p=re,g=ne,m=te;return P(),M(m,{modelValue:T(i),"onUpdate:modelValue":t[3]||(t[3]=e=>x(i)?i.value=e:i=e),title:e.$t("layerManger.createLayer"),width:"500",onOpen:t[4]||(t[4]=()=>{a.value.name="",a.value.geotype="",a.value.fields=[]})},{footer:_(()=>[U("div",Zt,[V(u,{onClick:t[2]||(t[2]=e=>x(i)?i.value=!1:i=!1)},{default:_(()=>[O(N(e.$t("layerManger.cancel")),1)]),_:1}),V(u,{type:"primary",onClick:r},{default:_(()=>[O(N(e.$t("layerManger.confirm")),1)]),_:1})])]),default:_(()=>[V(g,{model:a.value},{default:_(()=>[V(l,{label:e.$t("layerManger.layerName"),"label-width":Jt},{default:_(()=>[V(n,{modelValue:a.value.name,"onUpdate:modelValue":t[0]||(t[0]=e=>a.value.name=e),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label"]),V(l,{label:e.$t("layerManger.layerType"),"label-width":Jt},{default:_(()=>[V(c,{modelValue:a.value.geotype,"onUpdate:modelValue":t[1]||(t[1]=e=>a.value.geotype=e)},{default:_(()=>[(P(!0),S(L,null,R(gt,e=>G((P(),M(s,{key:e,label:e,value:e},null,8,["label","value"])),[[$,e!==gt.UNDEFINED]])),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),V(l,{label:e.$t("layerManger.fields"),"label-width":Jt},{default:_(()=>[V(p,{data:a.value.fields,border:"",style:{width:"100%"}},{default:_(()=>[V(d,{prop:"name",label:"Name"},{default:_(e=>[V(n,{modelValue:e.row.name,"onUpdate:modelValue":t=>e.row.name=t},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),V(d,{prop:"type",label:"Type"},{default:_(e=>[V(c,{modelValue:e.row.type,"onUpdate:modelValue":t=>e.row.type=t},{default:_(()=>[(P(!0),S(L,null,R(mt,e=>(P(),M(s,{key:e,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1}),V(d,{label:"Action"},{default:_(t=>[V(u,{link:"",type:"primary",size:"small",onClick:A(e=>{return n=t.$index,void a.value.fields.splice(n,1);var n},["prevent"])},{default:_(()=>[O(N(e.$t("layerManger.removeItem")),1)]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),V(u,{class:"mt-4",style:{width:"100%"},onClick:o},{default:_(()=>[O(N(e.$t("layerManger.addItem")),1)]),_:1})]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["modelValue","title"])}}}),Qt={key:2},en={class:"dialog-footer"},tn=E({__name:"PropertyDialog",setup(e){const t=zt();let n,i=D("propertyDialogVisiable"),a=h({owner:"",properties:[],originEntity:null});function o(){a.value={owner:"",properties:[]},$t.getInstance(r(t.Viewer)),n=new We(t.Viewer.canvas),n.setInputAction(e=>{a.value={owner:"",properties:[]};const n=t.Viewer.scene.pick(e.position);if(Oe(n)&&Oe(n.id)){a.value.originEntity=n.id;const e=n.id.entityCollection.owner;if(a.value.owner=e,n.id.properties){const t=n.id.properties.getValue(_e.now());for(const n in t){const i=e.fields.find(e=>e.name===n);let o;switch(null==i?void 0:i.type){case mt.STRING:o="text";break;case mt.NUMBER:o="number";break;case mt.BOOLEAN:o="checkbox";break;case mt.DATETIME:o="datetime-local"}a.value.properties.push({name:n,value:t[n],type:o})}}}},qe.LEFT_CLICK)}function l(){n&&(n.destroy(),n=null)}function s(e,t){const n=a.value.originEntity;n&&a.value.properties.forEach(e=>{n.properties[e.name]=e.value})}return(e,n)=>{const r=le,c=ue,d=re,u=se,p=te;return P(),M(p,{modelValue:T(i),"onUpdate:modelValue":n[2]||(n[2]=e=>x(i)?i.value=e:i=e),title:e.$t("layerManger.propertyInfo")+"-"+T(a).owner.name,width:"320",modal:!1,"modal-penetrable":!0,"close-on-click-modal":!1,draggable:!0,onOpen:o,onClose:l},{footer:_(()=>[U("div",en,[V(u,{onClick:n[0]||(n[0]=e=>x(i)?i.value=!1:i=!1)},{default:_(()=>[O(N(e.$t("layerManger.cancel")),1)]),_:1}),V(u,{type:"primary",onClick:n[1]||(n[1]=e=>x(i)?i.value=!1:i=!1)},{default:_(()=>[O(N(e.$t("layerManger.confirm")),1)]),_:1})])]),default:_(()=>[V(d,{data:T(a).properties,"max-height":"350",style:{width:"100%"},"header-row-style":{color:"black"}},{default:_(()=>[V(r,{prop:"name",label:e.$t("layerManger.propertyName"),width:"80"},null,8,["label"]),V(r,{label:e.$t("layerManger.propertyValue"),width:"200"},{default:_(e=>[T(t).isEditing&&"checkbox"!==e.row.type?(P(),M(T(ae),{key:0,type:e.row.type,modelValue:e.row.value,"onUpdate:modelValue":t=>e.row.value=t,onChange:t=>s(0,e.row)},null,8,["type","modelValue","onUpdate:modelValue","onChange"])):T(t).isEditing&&"checkbox"===e.row.type?(P(),M(c,{key:1,modelValue:e.row.value,"onUpdate:modelValue":t=>e.row.value=t,onChange:t=>s(0,e.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])):(P(),S("span",Qt,N(e.row.value),1))]),_:1},8,["label"])]),_:1},8,["data"])]),_:1},8,["modelValue","title"])}}}),nn={},an=ke.CYAN;function on(e){return{type:"FeatureCollection",features:e.map(e=>{const{type:t,coors:n,props:i}=function(e){var t;let n,i;e.polygon?(n="Polygon",i=e.polygon.hierarchy.getValue(_e.now()).positions,i.push(i[0])):e.polyline?(n="LineString",i=e.polyline.positions.getValue(_e.now())):e.position&&(n="Point",i=[e.position.getValue(_e.now())]);return F.defs([["EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"],["EPSG:4490",'GEOGCS["China Geodetic Coordinate System 2000",\n  DATUM["China_2000",\n      SPHEROID["CGCS2000",6378137,298.257222101,\n          AUTHORITY["EPSG","1024"]],\n      AUTHORITY["EPSG","1043"]],\n  PRIMEM["Greenwich",0,\n      AUTHORITY["EPSG","8901"]],\n  UNIT["degree",0.0174532925199433,\n      AUTHORITY["EPSG","9122"]],\n  AUTHORITY["EPSG","4490"]]']]),{type:n,coors:i.reduce((e,t)=>{const n=Re.fromCartesian(t),i=F("EPSG:4326","EPSG:4490",[Ae.toDegrees(n.longitude),Ae.toDegrees(n.latitude)]);return e.concat([i[0],i[1]])},new Array),props:null==(t=e.properties)?void 0:t.getValue(_e.now()),owner:e.entityCollection.owner.name}}(e),a=function(e,t){const n=[];for(let i=0;i<e.length;i+=t)n.push(e.slice(i,i+t));return n}(n,2);let o;return"Polygon"===t?o=function(e){const t=e.length;let n=0;for(let a=0;a<t;a++){const[i,o]=e[a],[r,l]=e[(a+1)%t];n+=i*l-r*o}const i=n/2;return!(i>0)&&(i<0||null)}(a)?[a]:[a.reverse()]:"LineString"===t?o=[a]:"Point"===t&&(o=a[0]),{type:"Feature",geometry:{type:t,coordinates:o},properties:i}}),crs:{type:"name",properties:{name:"urn:ogc:def:crs:EPSG::4490"}}}}function rn(e){const t=on(e.values);let n=e.owner.name;n||(n="shapefile"),n+=".zip",function(e,t){let n=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),a=(null==i?void 0:i.nonce)||(null==i?void 0:i.getAttribute("nonce"));n=e(t.map(e=>{if((e=function(e){return"/giseditor/"+e}(e))in nn)return;nn[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const i=document.createElement("link");return i.rel=t?"stylesheet":"modulepreload",t||(i.as="script"),i.crossOrigin="",i.href=e,a&&i.setAttribute("nonce",a),document.head.appendChild(i),t?new Promise((t,n)=>{i.addEventListener("load",t),i.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function i(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return n.then(t=>{for(const e of t||[])"rejected"===e.status&&i(e.reason);return e().catch(i)})}(()=>import("./index-Q_9iz5VQ.js"),__vite__mapDeps([0,1,2])).then(e=>e.zip(t,{compression:"STORE",outputType:"blob",prj:'GEOGCS["GCS_China_Geodetic_Coordinate_System_2000",DATUM["D_China_2000",SPHEROID["CGCS2000",6378137.0,298.257222101]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'}).then(function(e){B.saveAs(e,n)}))}function ln(e){e.polygon?e.polygon.material=e.polygon.currentMaterial:e.polyline?e.polyline.material=e.polyline.currentMaterial:e.position&&(e.point?e.point.color=e.point.currentColor:e.billboard.color=e.billboard.currentColor)}const sn={role:"heading","aria-level":"2",class:"el-dialog__title"},cn={class:"my-header-button"},dn={key:0},un={key:1},pn={class:"dialog-footer"},gn=(e,t)=>{const n=e.__vccOpts||e;for(const[i,a]of t)n[i]=a;return n},mn=gn(E({__name:"propertyTableHeader",setup(e){const{t:t}=k(),n=zt(),i=h(!1),a=h("add"),o=h(""),l=C({name:"",type:mt.STRING});function s(){var e;const t=null==(e=n.currentDataSource)?void 0:e.entities;if(!t)return;const i=t.values.map(e=>{var t;return null==(t=e.properties)?void 0:t.getValue(_e.now())}),a=H.json_to_sheet(i),o=H.book_new();H.book_append_sheet(o,a,"Data");const r=n.currentDataSource.fields.map(e=>e.name);H.sheet_add_aoa(a,[r],{origin:"A1"}),z(o,n.currentDataSource.name+".xlsx",{cellDates:!1})}const c=h(null);function d(){var e;c.value.onchange=function(e){let t=new FileReader;c.value&&c.value.files&&(t.readAsArrayBuffer(c.value.files[0]),t.onload=function(e){var t,i;const a=K(null==(t=e.target)?void 0:t.result,{type:"array",cellDates:!0}),o=a.Sheets[a.SheetNames[0]],r=H.sheet_to_json(o),l=(null==(i=n.currentDataSource)?void 0:i.entities).values;for(let s=0;s<r.length;s++){const e=r[s],t=l[s],i=n.currentDataSource.fields;for(let n=0;n<i.length;n++){const a=i[n];(null==a?void 0:a.type)===mt.DATETIME?t.properties[a.name]=v(e[a.name]).format("YYYY-MM-DDTHH:mm"):t.properties[a.name]=e[a.name]}}}),c.value.value=""},null==(e=c.value)||e.click()}function u(){if("add"==a.value){if(!function(e){var i;const a=r(n.currentDataSource);return-1!==(null==(i=a.fields)?void 0:i.findIndex(t=>t.name===e.name))?(alert(t("infoMessage.fieldRepeat")),!1):(a.entities.values.forEach(t=>{var n;null==(n=t.properties)||n.addProperty(e.name,"")}),n.currentDataSource.fields.push({name:e.name,type:e.type}),Wt.emit(qt.layerModified,a),!0)}(l))return}else if(!function(e){var i;const a=r(n.currentDataSource),o=null==(i=a.fields)?void 0:i.findIndex(t=>t.name===e);return-1!==o?(a.entities.values.forEach(t=>{var n;null==(n=t.properties)||n.removeProperty(e)}),a.fields.splice(o,1),Wt.emit(qt.layerModified,a),!0):(alert(t("infoMessage.fieldDeleteFailed")),!1)}(o.value))return;i.value=!1}return(e,t)=>{var r;const p=se,g=ge,m=pe,v=ie,f=ae,y=de,h=oe,w=ne,C=te;return P(),S(L,null,[U("span",sn,N(e.$t("layerManger.propertiesTable"))+"-"+N(null==(r=T(n).currentDataSource)?void 0:r.name),1),U("div",cn,[V(p,{onClick:s},{default:_(()=>[O(N(e.$t("layerManger.downloadTemplate")),1)]),_:1}),U("input",{type:"file",id:"fileInput",ref_key:"fileInput",ref:c,accept:".xlsx",style:{display:"none"}},null,512),V(p,{onClick:d},{default:_(()=>[O(N(e.$t("layerManger.uploadTemplate")),1)]),_:1}),V(p,{onClick:t[0]||(t[0]=e=>i.value=!0)},{default:_(()=>[O(N(e.$t("layerManger.fieldsManager")),1)]),_:1})]),V(C,{modelValue:i.value,"onUpdate:modelValue":t[6]||(t[6]=e=>i.value=e),title:e.$t("layerManger.fieldsManager"),width:"300",modal:!1,draggable:!0},{footer:_(()=>[U("div",pn,[V(p,{onClick:t[5]||(t[5]=e=>i.value=!1)},{default:_(()=>[O(N(e.$t("layerManger.cancel")),1)]),_:1}),V(p,{type:"primary",onClick:u},{default:_(()=>[O(N(e.$t("layerManger.confirm")),1)]),_:1})])]),default:_(()=>[V(w,{"label-width":"auto",style:{"max-width":"600px"}},{default:_(()=>[V(v,{label:e.$t("layerManger.manageType"),"label-position":"right"},{default:_(()=>[V(m,{modelValue:a.value,"onUpdate:modelValue":t[1]||(t[1]=e=>a.value=e),"aria-label":"label position"},{default:_(()=>[V(g,{value:"add"},{default:_(()=>[O(N(e.$t("layerManger.fieldAdd")),1)]),_:1}),V(g,{value:"delete"},{default:_(()=>[O(N(e.$t("layerManger.fieldDelete")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"]),"add"===a.value?(P(),S("div",dn,[V(v,{label:e.$t("layerManger.fieldName"),"label-position":"right"},{default:_(()=>[V(f,{modelValue:l.name,"onUpdate:modelValue":t[2]||(t[2]=e=>l.name=e)},null,8,["modelValue"])]),_:1},8,["label"]),V(v,{label:e.$t("layerManger.fieldType"),"label-position":"right"},{default:_(()=>[V(h,{modelValue:l.type,"onUpdate:modelValue":t[3]||(t[3]=e=>l.type=e),size:"large",style:{width:"240px"}},{default:_(()=>[(P(!0),S(L,null,R(mt,e=>(P(),M(y,{key:e,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])])):(P(),S("div",un,[V(v,{label:e.$t("layerManger.fieldName"),"label-position":"right"},{default:_(()=>[V(h,{modelValue:o.value,"onUpdate:modelValue":t[4]||(t[4]=e=>o.value=e),placeholder:"Select",size:"large",style:{width:"240px"}},{default:_(()=>[(P(!0),S(L,null,R(T(n).currentDataSource.fields,e=>(P(),M(y,{key:e.name,label:e.name,value:e.name},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]))]),_:1})]),_:1},8,["modelValue","title"])],64)}}}),[["__scopeId","data-v-b9e172e5"]]),vn={style:{height:"350px"}},fn={class:"dialog-footer"},yn=E({__name:"PropertyTableDialog",setup(e){const t=zt();let n,i=D("propertyTableDialogVisiable");function a(){$t.getInstance(r(t.Viewer)),d(t.currentDataSource),Wt.on(qt.setCurrentLayer,e=>{d(e)}),Wt.on(qt.layerModified,e=>{r(t.currentDataSource)==e&&d(e)})}function o(){n&&(ln(n),n=void 0),Wt.off(qt.setCurrentLayer),Wt.off(qt.layerModified)}const l={onClick:({rowData:e,rowIndex:i,event:a})=>{const o=t.currentDataSource.entities.values[i];var r;n&&ln(n),n=o,(r=o).polygon?(r.polygon.currentMaterial=r.polygon.material,r.polygon.material=new Le(an)):r.polyline?(r.polyline.currentMaterial=r.polyline.material,r.polyline.material=new Le(an)):r.position&&(r.point?(r.point.currentColor=r.point.color,r.point.color=an):(r.billboard.currentColor=r.billboard.color,r.billboard.color=an))}},s=h([]),c=h([]),d=e=>{e?(s.value=e.fields.map((e,n,i)=>({key:`field-${n}`,dataKey:`field-${n}`,title:e.name,width:150,dataType:e.type,cellRenderer:({column:e,rowData:n,rowIndex:i})=>{const a=n=>{const a=t.currentDataSource.entities.values[i];a&&(a.properties[e.title]=n)};if(!t.isEditing)return V("span",null,[n[e.dataKey]]);switch(e.dataType){case mt.BOOLEAN:return V(ue,{modelValue:n[e.dataKey],"onUpdate:modelValue":t=>n[e.dataKey]=t,onChange:()=>a(n[e.dataKey])},null);case mt.NUMBER:return V(ae,{type:"number",modelValue:n[e.dataKey],"onUpdate:modelValue":t=>n[e.dataKey]=t,onChange:()=>a(n[e.dataKey])},null);case mt.DATETIME:return V(ae,{type:"datetime-local",modelValue:n[e.dataKey],"onUpdate:modelValue":t=>n[e.dataKey]=t,onChange:()=>a(n[e.dataKey])},null);case mt.STRING:default:return V(ae,{type:"text",modelValue:n[e.dataKey],"onUpdate:modelValue":t=>n[e.dataKey]=t,onChange:()=>a(n[e.dataKey])},null)}}})),s.value.unshift({key:"column-n-1",width:50,title:"",cellRenderer:({rowIndex:e})=>`${e+1}`,align:"center"}),c.value=(e=>e.entities.values.map((t,n,i)=>{var a;const o=null==(a=t.properties)?void 0:a.getValue(_e.now()),r={id:`row-${n}`,parentId:null};return e.fields.forEach(t=>{r[`field-${e.fields.indexOf(t)}`]=o[t.name]}),r}))(e)):(s.value=[],c.value=[])};return(e,t)=>{const n=ve,r=me,d=se,u=te;return P(),M(u,{modelValue:T(i),"onUpdate:modelValue":t[2]||(t[2]=e=>x(i)?i.value=e:i=e),width:"600",modal:!1,"modal-penetrable":!0,"close-on-click-modal":!1,draggable:!0,onOpen:a,onClose:o},{header:_(({titleId:e,titleClass:t})=>[V(mn)]),footer:_(()=>[U("div",fn,[V(d,{onClick:t[0]||(t[0]=e=>x(i)?i.value=!1:i=!1)},{default:_(()=>[O(N(e.$t("layerManger.cancel")),1)]),_:1}),V(d,{type:"primary",onClick:t[1]||(t[1]=e=>x(i)?i.value=!1:i=!1)},{default:_(()=>[O(N(e.$t("layerManger.confirm")),1)]),_:1})])]),default:_(()=>[U("div",vn,[V(r,null,{default:_(({height:e,width:t})=>[V(n,{ref:"tableRef",columns:s.value,data:c.value,width:t,height:e,"row-event-handlers":l,fixed:""},null,8,["columns","data","width","height"])]),_:1})])]),_:1},8,["modelValue"])}}}),hn={class:"map-toolbar"},wn=["disabled"],Cn=["disabled"],En=["disabled"],bn=["disabled"],Pn=["disabled"],Sn=["disabled"],In={key:0},kn={class:"drawingchecks"},Dn=gn(E({__name:"SubMenu",setup(e){const{t:t}=k(),n=e=>{Wt.emit(qt.swithLangauge,e)},i=zt(),a=r(i.Viewer),o=new vt("graphicDS");i.Viewer.dataSources.add(o);let l=h(!1);W("createLayerVisiable",l);let s=h(!1);W("propertyDialogVisiable",s);let c=h(!1);W("propertyEditDialogVisiable",c);let d=h(!1);W("propertyTableDialogVisiable",d);const u=h(!1),p=h(null),g=h(null),m=h(null),v=h(null),f=h(null);function y(){p.value.onchange=function(){var e,n,i,r;let l=new FileReader,s=null==(e=g.value)?void 0:e.value.split(",").map(e=>Number(e)),c=null==(n=m.value)?void 0:n.value.split(",").map(e=>Number(e)),d=null==(i=v.value)?void 0:i.value.split(",").map(e=>Number(e)),y=null==(r=f.value)?void 0:r.value.split(",").map(e=>Number(e));p.value&&p.value.files&&(l.readAsDataURL(p.value.files[0]),l.onload=function(e){var n,i,r;if(u.value){const t=new Vt({coor1:new Ke(s[0],s[1]),coor2:new Ke(c[0],c[1]),coor3:new Ke(d[0],d[1]),coor4:new Ke(y[0],y[1])},null==(i=e.target)?void 0:i.result);o.entities.add(t),a.flyTo(t)}else(r=null==(n=e.target)?void 0:n.result,new Promise((e,t)=>{const n=new Image;n.onload=()=>{e({width:n.width,height:n.height})},n.onerror=t,n.src=r})).then(n=>{var i;const r=a.scene.camera.computeViewRectangle();if(!r)return;const l=n.width/n.height,u=je.center(r);if(0===u.longitude&&0===u.latitude)return alert(t("infoMessage.loadImage")),void(p.value.value="");let g=r.width,m=r.height;g=g>m?g:m*l,m=m>g?m:g/l,s=[Ae.toDegrees(u.longitude-g/2),Ae.toDegrees(u.latitude-m/2)],c=[Ae.toDegrees(u.longitude-g/2),Ae.toDegrees(u.latitude+m/2)],d=[Ae.toDegrees(u.longitude+g/2),Ae.toDegrees(u.latitude+m/2)],y=[Ae.toDegrees(u.longitude+g/2),Ae.toDegrees(u.latitude-m/2)];const v=new Vt({coor1:new Ke(s[0],s[1]),coor2:new Ke(c[0],c[1]),coor3:new Ke(d[0],d[1]),coor4:new Ke(y[0],y[1])},null==(i=e.target)?void 0:i.result);o.entities.add(v),a.flyTo(v,{offset:new ot(0,Ae.toRadians(-90),0)})})}),p.value.value=""},p.value.click()}const w=h(100);function C(e){Rt.currentImageEntity?Rt.currentImageEntity.transparent=w.value/100:alert(t("infoMessage.selectImage"))}const E=h(null);function b(){var e;E.value.onchange=function(e){let t=new FileReader,n=gt.UNDEFINED;if(E.value&&E.value.files&&E.value.files.length>0){const e=E.value.files[0].name;t.readAsArrayBuffer(E.value.files[0]),t.onload=function(t){var i;Nt.getShp(null==(i=t.target)?void 0:i.result).then(t=>{var i;t.name=e.slice(0,e.lastIndexOf(".")),t.entities.values.forEach(function(e){e.position&&(n=gt.POINT,e.billboard=new Ye({image:"icons/img/dragIcon.png",scale:1,color:ct})),e.polygon&&(n=gt.POLYGON,e.polygon.material=new Le(st),e.polygon.outline=new Ge(!0),e.polygon.outlineWidth=new Ge(1),e.polygon.outlineColor=new Le(ut)),e.polyline&&(n=gt.LINE,e.polyline.material=new Le(dt))});const o=null==(i=t.entities.values[0].properties)?void 0:i.propertyNames.map(e=>({name:e,type:mt.STRING}));t.fields=o,t.geoType=n,a.dataSources.add(t),a.flyTo(t)})}}E.value.value=""},null==(e=E.value)||e.click()}function I(){i.currentDataSource?rn(i.currentDataSource.entities):alert(t("infoMessage.selectLayer"))}function D(e){Dt.canMove=e}function M(e){Et.viewer=a,Et.viewer.scene.mode===rt.SCENE3D?Et.HeightReference=e?De.CLAMP_TO_GROUND:De.NONE:alert(t("infoMessage.noSupportedUnder3D"))}function R(e){Et.isCapture=e}function A(){i.currentDataSource?Ht.getInstance(a,r(i.currentDataSource).entities):alert(t("infoMessage.selectLayer"))}function $(){i.currentDataSource?(Ht.getInstance(a,r(i.currentDataSource).entities),Ht.selectAllEntities()):alert(t("infoMessage.selectLayer"))}function B(){i.currentDataSource?confirm(t("infoMessage.deleteLayer")+i.currentDataSource.name+"？")&&a.dataSources.remove(r(i.currentDataSource),!0):alert(t("infoMessage.selectLayer"))}return(e,t)=>{const r=ye,c=fe,h=he,k=ue;return P(),S(L,null,[U("div",hn,[U("button",{onClick:t[0]||(t[0]=()=>$t.getInstance(T(a)))},N(e.$t("maptool.default")),1),t[19]||(t[19]=U("label",null,"|",-1)),U("button",{onClick:t[1]||(t[1]=e=>x(l)?l.value=!0:l=!0)},N(e.$t("maptool.createLayer")),1),U("button",{onClick:t[2]||(t[2]=()=>{T(i).isEditing=!T(i).isEditing,$t.getInstance(T(a))})},N(T(i).isEditing?e.$t("maptool.stopEdit"):e.$t("maptool.startEdit")),1),U("button",{disabled:!T(i).isEditing,onClick:t[3]||(t[3]=()=>new bt(T(a),T(o).entities))},N(e.$t("maptool.drawPoint")),9,wn),U("button",{disabled:!T(i).isEditing,onClick:t[4]||(t[4]=()=>new Pt(T(a),T(o).entities))},N(e.$t("maptool.drawLine")),9,Cn),U("button",{disabled:!T(i).isEditing,onClick:t[5]||(t[5]=()=>new St(T(a),T(o).entities))},N(e.$t("maptool.drawPolygon")),9,En),t[20]||(t[20]=U("label",null,"|",-1)),U("button",{disabled:!T(i).isEditing,onClick:t[6]||(t[6]=()=>Dt.getInstance(T(a)))},N(e.$t("maptool.vectorEdit")),9,bn),U("button",{disabled:!T(i).isEditing,onClick:t[7]||(t[7]=()=>xt.getInstance(T(a)))},N(e.$t("maptool.mergePolygon")),9,Pn),U("button",{disabled:!T(i).isEditing,onClick:t[8]||(t[8]=()=>_t.getInstance(T(a)))},N(e.$t("maptool.lineOrPolygonSplit")),9,Sn),t[21]||(t[21]=U("label",null,"|",-1)),U("button",{onClick:t[9]||(t[9]=e=>x(s)?s.value=!0:s=!0)},N(e.$t("maptool.propertyInfo")),1),U("button",{onClick:t[10]||(t[10]=e=>x(d)?d.value=!0:d=!0)},N(e.$t("maptool.propertiesTable")),1),t[22]||(t[22]=U("label",null,"|",-1)),U("input",{type:"file",id:"fileInput",ref_key:"fileInput",ref:p,accept:"image/*",style:{display:"none"}},null,512),u.value?(P(),S("span",In,[t[15]||(t[15]=U("label",{for:"file"},"坐标范围：",-1)),U("input",{class:"coorinput",type:"text",ref_key:"corr1",ref:g,id:"corr1",value:"96, 30"},null,512),U("input",{class:"coorinput",type:"text",ref_key:"corr2",ref:m,id:"corr2",value:"94, 43"},null,512),U("input",{class:"coorinput",type:"text",ref_key:"corr3",ref:v,id:"corr3",value:"120, 43"},null,512),U("input",{class:"coorinput",type:"text",ref_key:"corr4",ref:f,id:"corr4",value:"119, 31"},null,512)])):Y("",!0),U("button",{onClick:y},N(e.$t("maptool.loadImage")),1),U("button",{onClick:t[11]||(t[11]=()=>Rt.getInstance(T(a)))},N(e.$t("maptool.imageEdit")),1),U("button",{onClick:t[12]||(t[12]=()=>Ot.getInstance(T(a)))},N(e.$t("maptool.affineTransform")),1),G(U("input",{type:"range",min:"0",max:"100",value:"50","onUpdate:modelValue":t[13]||(t[13]=e=>w.value=e),onInput:C},null,544),[[j,w.value]]),t[23]||(t[23]=U("label",null,"|",-1)),U("input",{type:"file",id:"shpfileInput",ref_key:"shpfileInput",ref:E,accept:".zip",style:{display:"none"}},null,512),U("button",{onClick:A},N(e.$t("maptool.selectEntity")),1),U("button",{onClick:$},N(e.$t("maptool.selectAll")),1),t[24]||(t[24]=U("label",null,"|",-1)),U("button",{onClick:b},N(e.$t("maptool.loadShp")),1),U("button",{onClick:I},N(e.$t("maptool.exportShp")),1),t[25]||(t[25]=U("label",null,"|",-1)),U("button",{onClick:t[14]||(t[14]=()=>{T(o).entities.removeAll()})},N(e.$t("maptool.graphicsClear")),1),U("button",{onClick:B},N(e.$t("maptool.deleteLayer")),1),t[26]||(t[26]=U("label",null,"|",-1)),V(h,{placement:"bottom",onCommand:n},{dropdown:_(()=>[V(c,null,{default:_(()=>[V(r,{command:"zh-cn"},{default:_(()=>[...t[16]||(t[16]=[O("中文",-1)])]),_:1}),V(r,{command:"en"},{default:_(()=>[...t[17]||(t[17]=[O("English",-1)])]),_:1})]),_:1})]),default:_(()=>[t[18]||(t[18]=U("button",null," 中/En ",-1))]),_:1})]),U("div",kn,[V(k,{label:e.$t("maptool.isMoved"),onChange:D},null,8,["label"]),V(k,{label:e.$t("maptool.isGrounded"),onChange:M},null,8,["label"]),V(k,{label:e.$t("maptool.graphicCapture"),onChange:R},null,8,["label"])]),V(Xt),V(tn),V(yn)],64)}}}),[["__scopeId","data-v-f15d8a41"]]),Mn={class:"layermangerHeader"},xn=["onClick"],Tn=["onInput"],_n=gn(E({__name:"LayerManger",setup(e){const t=zt(),n=t.DataSources;return(e,i)=>(P(),S(L,null,[U("div",Mn,N(e.$t("maptool.layerManger")),1),(P(!0),S(L,null,R(T(n),e=>G((P(),S("div",{key:e.name,onClick:n=>function(e){if(t.setCurrentDataSource(e),Wt.emit(qt.setCurrentLayer,e),!t.isEditing)return;const n=new xe;switch(e.fields.forEach(e=>{n.addProperty(e.name,"")}),e.geoType){case gt.POINT:new bt(r(t.Viewer),e.entities,void 0,n);break;case gt.LINE:new Pt(r(t.Viewer),e.entities,void 0,n);break;case gt.POLYGON:new St(r(t.Viewer),e.entities,void 0,n)}}(e),class:q(["layer-item",{LayerSelected:e===T(t).currentDataSource}])},[U("input",{type:"checkbox",checked:"",onInput:t=>function(e,t){const n=e.target.checked;t.show=n}(t,e)},null,40,Tn),O(" "+N(e.name),1)],10,xn)),[[$,!["graphicDS","markers","editMarkers"].includes(e.name)]])),128))],64))}}),[["__scopeId","data-v-fb24ae76"]]),Vn={class:"app-footer"},Ln=gn({__name:"MainFooter",props:{showLinks:{type:Boolean,default:!0},companyName:{type:String,default:"CJQiao 252804989@qq.com"}},setup(e){const t=e,n=h((new Date).getFullYear());return(e,i)=>(P(),S("div",Vn,[O(" © "+N(n.value)+" "+N(t.companyName)+". ",1),i[0]||(i[0]=U("a",{href:"https://github.com/joe4u/giseditor",target:"_blank",rel:"noopener"}," github ",-1))]))}},[["__scopeId","data-v-ae118288"]]),Rn={class:"common-layout"},An=gn(E({__name:"PageLayout",setup(e){const t=zt(),{locale:n}=k(),i=h(Ce);return Wt.on(qt.swithLangauge,e=>{"en"==e?(i.value=we,n.value="en"):(i.value=Ce,n.value="zh-cn")}),(e,n)=>{const a=Pe,o=Se,r=Ie,l=be;return P(),M(T(Ee),{locale:i.value},{default:_(()=>[U("div",Rn,[V(l,null,{default:_(()=>[V(a,null,{default:_(()=>[T(t).Viewer?(P(),M(Dn,{key:0})):Y("",!0)]),_:1}),V(l,null,{default:_(()=>[V(o,{width:"200px"},{default:_(()=>[T(t).Viewer?(P(),M(_n,{key:0})):Y("",!0)]),_:1}),V(r,null,{default:_(()=>[V(jt)]),_:1}),V(Ln)]),_:1})]),_:1})])]),_:1},8,["locale"])}}}),[["__scopeId","data-v-a5ed0a8d"]]),On=E({__name:"App",setup:e=>(e,t)=>(P(),M(An))}),Nn=Z({history:J("/giseditor/"),routes:[]}),Un=X({locale:"zh-cn",fallbackLocale:"en",messages:{"zh-cn":{maptool:{default:"默认",createLayer:"创建图层",startEdit:"开始编辑",stopEdit:"停止编辑",drawPoint:"画点",drawLine:"画线",drawPolygon:"画面",vectorEdit:"矢量编辑",mergePolygon:"合并面",lineOrPolygonSplit:"线/面分割",propertyInfo:"属性信息",propertiesTable:"属性表",loadImage:"加载图像",imageEdit:"图像编辑",affineTransform:"仿射变换",selectEntity:"选择",selectAll:"全选",loadShp:"加载shp",exportShp:"导出shp",graphicsClear:"清除图形",deleteLayer:"删除图层",isMoved:"能否移动",isGrounded:"能否贴地",angleCapture:"直角捕捉",graphicCapture:"图形捕捉",layerManger:"图层管理"},layerManger:{createLayer:"创建图层",layerName:"图层名称",layerType:"图层类型",fields:"字段",propertyInfo:"属性信息",propertyName:"属性名",propertyValue:"属性值",propertiesTable:"属性表",downloadTemplate:"下载模板",uploadTemplate:"上传模板",fieldsManager:"字段管理",manageType:"类型",fieldAdd:"添加",fieldDelete:"删除",fieldName:"字段名",fieldType:"字段类型",addItem:"添加",removeItem:"删除",cancel:"取消",confirm:"确定"},infoMessage:{loadImage:"请调整合适的图片视口！",selectImage:"请选择图片！",selectLayer:"请选择图层！",noSupportedUnder3D:"3D模式下不支持！",deleteLayer:"确定删除图层：",fieldRepeat:"字段重复！",fieldDeleteFailed:"字段删除失败！",inputLayername:"请输入图层名称！",inputLayerType:"请选择图层类型！",inputFieldInfo:"请输入字段信息！"}},en:{maptool:{default:"Default",createLayer:"Create Layer",startEdit:"Start Edit",stopEdit:"Stop Edit",drawPoint:"Draw Point",drawLine:"Draw Line",drawPolygon:"Draw Polygon",vectorEdit:"Vector Edit",mergePolygon:"Merge Polygon",lineOrPolygonSplit:"Line/Polygon Split",propertyInfo:"Property Info",propertiesTable:"Properties Table",loadImage:"Load Image",imageEdit:"Image Edit",affineTransform:"Affinate Transform",selectEntity:"Select Entity",selectAll:"Select All",loadShp:"Load Shapefile",exportShp:"Export Shapefile",graphicsClear:"Clear Graphics",deleteLayer:"Delete Layer",isMoved:"Entity Movable",isGrounded:"Is Grounded",angleCapture:"Rectangle Capture",graphicCapture:"Graphic Capture",layerManger:"Layer Manager"},layerManger:{createLayer:"Create Layer",layerName:"Layer Name",layerType:"Layer Type",fields:"Fields",propertyInfo:"Property Info",propertyName:"Key",propertyValue:"Value",propertiesTable:"Properties Table",downloadTemplate:"Download Template",uploadTemplate:"Upload Data",fieldsManager:"Fields Manager",manageType:"Type",fieldAdd:"Add",fieldDelete:"Delete",fieldName:"Field Name",fieldType:"Field Type",addItem:"Add Item",removeItem:"Remove",cancel:"Cancel",confirm:"Confirm"},infoMessage:{loadImage:"Please adjust the image viewport!",selectImage:"Please select an image!",selectLayer:"Please select a layer!",noSupportedUnder3D:"Unsupported under 3D mode!",deleteLayer:"Confirm to delete layer:",fieldRepeat:"Field repeat!",fieldDeleteFailed:"Field delete failed!",inputLayername:"Please input layer name!",inputLayerType:"Please select layer type!",inputFieldInfo:"Please input field info!"}}}}),Gn=Q(On);Gn.use(ee()),Gn.use(Nn),Gn.use(Un),Gn.mount("#app");
